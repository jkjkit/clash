port: 7890
socks-port: 7891
mixed-port: 7892
redir-port: 7893
tproxy-port: 7894

unified-delay: true
geodata-mode: false
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 24
tcp-concurrent: true
find-process-mode: strict
global-client-fingerprint: chrome

allow-lan: true
mode: rule
log-level: info
ipv6: true
udp: true

external-controller: 0.0.0.0:9090

sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true

dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter:
    - "*"
    - +.lan
  default-nameserver:
    - 223.5.5.5
    - 223.6.6.6
  nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query

proxies:

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…çš„å‚æ•° [æ¯24å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 60 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
NodeParam: &NodeParam {type: http, interval: 86400, health-check: {enable: true, url: 'http://connectivitycheck.gstatic.com/generate_204', interval: 60}}

# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…
proxy-providers: 
  Sub1:
    url: 'è®¢é˜…é“¾æ¥1'
    <<: *NodeParam
    path: './proxy_provider/Sub1.yaml'
  
  Sub2:
    url: 'è®¢é˜…é“¾æ¥2'
    <<: *NodeParam
    path: './proxy_provider/Sub2.yaml'
  
  Sub3:
    url: 'è®¢é˜…é“¾æ¥3'
    <<: *NodeParam
    path: './proxy_provider/Sub3.yaml'

# é”šç‚¹ - æ•…éšœè½¬ç§»å‚æ•° [æ¯ 10 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 3 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
FallBack: &FallBack {type: fallback, interval: 10, lazy: true, url: 'http://connectivitycheck.gstatic.com/generate_204', disable-udp: false, timeout: 3000, max-failed-times: 3, hidden: true, include-all-providers: true}
# é”šç‚¹ - è§„åˆ™å‚æ•° [æ¯å¤©æ›´æ–°ä¸€æ¬¡è®¢é˜…è§„åˆ™ï¼Œæ›´æ–°è§„åˆ™æ—¶ä½¿ç”¨Proxyç­–ç•¥]
RuleSet: &RuleSet {type: http, behavior: classical, interval: 86400, format: yaml, proxy: Proxy}

# é”šç‚¹ - èŠ‚ç‚¹ç­›é€‰
Filter-HK: &Filter-HK 'é¦™æ¸¯|HK|HongKong'
Filter-TW: &Filter-TW 'å°æ¹¾|TW|Taiwan'
Filter-US: &Filter-US 'ç¾å›½|US|United States|America'
Filter-UK: &Filter-UK 'è‹±å›½|UK|United Kingdom|England'
Filter-JP: &Filter-JP 'æ—¥æœ¬|JP|Japan'
Filter-KR: &Filter-KR 'éŸ©å›½|KR|Korean'
Filter-SG: &Filter-SG 'æ–°åŠ å¡|SG|Singapore'
Filter-Pro: &Filter-Pro 'å®¶å®½|ä¸“çº¿'
Filter-Other: &Filter-Other '^(?!.*(é¦™æ¸¯|HK|HongKong|å°æ¹¾|TW|Taiwan|ç¾å›½|US|United States|America|è‹±å›½|UK|United Kingdom|England|æ—¥æœ¬|JP|Japan|éŸ©å›½|KR|Korean|æ–°åŠ å¡|SG|Singapore)).*$'

#ç­–ç•¥ç»„
proxy-groups:
  # ä¸»ç­–ç•¥ç»„ - åŒ…å«æ‰€æœ‰å›½å®¶åˆ†ç»„å’Œæ‰€æœ‰èŠ‚ç‚¹
  - {name: Proxy, type: select, proxies: [ğŸ‡­ğŸ‡° HK,ğŸ‡¹ğŸ‡¼ TW,ğŸ‡ºğŸ‡¸ US,ğŸ‡¬ğŸ‡§ UK,ğŸ‡¯ğŸ‡µ JP,ğŸ‡°ğŸ‡· KR,ğŸ‡¸ğŸ‡¬ SG,Pro]}

  # å…¶ä»–åœ°åŒºåˆ†ç»„ - åŒ…å«é™¤äº†ä¸Šè¿°7ä¸ªå›½å®¶/åœ°åŒºä¹‹å¤–çš„æ‰€æœ‰èŠ‚ç‚¹
  - {name: Other, type: select, include-all-providers: true, filter: *Filter-Other}
  
  # æ‰€æœ‰èŠ‚ç‚¹ç­–ç•¥ç»„ - æ˜¾ç¤ºæ‰€æœ‰è®¢é˜…èŠ‚ç‚¹
  - {name: All, type: select, include-all-providers: true}

  # ç¬¬ä¸€ä¸ªè®¢é˜…é“¾æ¥
  - {name: Sub1, type: select, use: [Sub1]}  
    
  # å›½å®¶/åœ°åŒºåˆ†ç»„ï¼ˆè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼‰
  - {name: ğŸ‡­ğŸ‡° HK, <<: *FallBack, filter: *Filter-HK}
  - {name: ğŸ‡¹ğŸ‡¼ TW, <<: *FallBack, filter: *Filter-TW}
  - {name: ğŸ‡ºğŸ‡¸ US, <<: *FallBack, filter: *Filter-US}
  - {name: ğŸ‡¬ğŸ‡§ UK, <<: *FallBack, filter: *Filter-UK}
  - {name: ğŸ‡¯ğŸ‡µ JP, <<: *FallBack, filter: *Filter-JP}
  - {name: ğŸ‡°ğŸ‡· KR, <<: *FallBack, filter: *Filter-KR}
  - {name: ğŸ‡¸ğŸ‡¬ SG, <<: *FallBack, filter: *Filter-SG}
  - {name: Pro, <<: *FallBack, filter: *Filter-Pro}
  - {name: Other Auto, <<: *FallBack, filter: *Filter-Other}    

#è®¢é˜…è§„åˆ™
rule-providers:
  Adblock:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/AdBlock.yml'
    path: './RuleSet/AdBlock.yml'

  China:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/China.yml'
    path: './RuleSet/China.yml'

  Direct:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Direct.yml'
    path: './RuleSet/Direct.yml'

  DownloadClient:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/DownloadClient.yml'
    path: './RuleSet/DownloadClient.yml'

  Github:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Github.yml'
    path: './RuleSet/Github.yml'

  Google:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Google.yml'
    path: './RuleSet/Google.yml'

  Microsoft:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Microsoft.yml'
    path: './RuleSet/Microsoft.yml'

  Proxy:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Proxy.yml'
    path: './RuleSet/Proxy.yml'

  ProxyClient:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/ProxyClient.yml'
    path: './RuleSet/ProxyClient.yml'

  Telegram:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Telegram.yml'
    path: './RuleSet/Telegram.yml'

  Tencent:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Tencent.yml'
    path: './RuleSet/Tencent.yml'

  Twitter:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Twitter.yml'
    path: './RuleSet/Twitter.yml'

  YouTube:
    <<: *RuleSet
    url: 'https://cdn.jsdelivr.net/gh/jkjkit/clash@main/Filter/Youtube.yml'
    path: './RuleSet/YouTube.yml'

#åˆ†æµè§„åˆ™
rules:
  - RULE-SET,DownloadClient,DIRECT
  - RULE-SET,Adblock,REJECT
  - RULE-SET,China,DIRECT
  - RULE-SET,Tencent,DIRECT
  - RULE-SET,Microsoft,Proxy
  - RULE-SET,Github,Proxy
  - RULE-SET,Google,Proxy
  - RULE-SET,YouTube,Proxy
  - RULE-SET,Twitter,Proxy
  - RULE-SET,Telegram,Proxy
  - RULE-SET,Proxy,Proxy
  - RULE-SET,Direct,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
